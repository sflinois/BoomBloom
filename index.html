<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BoomBloom</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
</head>
<body>
    <div class="row" id="content">
        <div class="col-4" id="sidemenu">
            <div id="title" class="row">
                <div id="logo-wrapper">
                    <img src="logo.png" alt="Logo">
                </div>
                <h1>BoomBloom</h1>
            </div>
            <div class="w-100" style="height: 0; border-bottom: 1px solid grey"></div>
            <div id="metadata">
                <label for="ville">Ville: </label>
                <select id="ville" class="form-control">
                    <option>St-Michel-en-Grève</option>
                </select>
                <label for="plage">Plage: </label>
                <select id="plage" class="form-control">
                    <option value="">La Lieue de Grève</option>
                    <option value="">Plage de Tossen Arc Choz</option>
                    <option value="greve">Grève des Curés</option>
                </select>
            </div>
            <div id="indice">
                <img id=smiley src="./images/smiley-rouge.png" alt="Indice OK">
            </div>
            <div class="w-100" style="height: 0; border-bottom: 1px solid grey; margin-bottom: 20px"></div>

            <div>
                <div id="charts" class="row">
                    <h4>Evolution temporelle</h4>
                        <canvas id="chart" width="400" height="300"></canvas>
                </div>
            </div>
        </div>
        <div id="map-wrapper" class="col-8">
            <div id="mapid"></div>
        </div>
        <div id="photosat"></div>
        <button id="change-map" type="button" class="btn btn-info">Satellite</button>
    </div>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
    integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
    crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="./charts.js"></script>
    <script src="./map.js"></script>
    <script lang="js">
        let mapwrapper = document.getElementById('map-wrapper');
        let button = document.getElementById('change-map');
        let photosat = document.getElementById('photosat');
        let plage_select = document.getElementById('plage');
        let mapDisplay = true;

        button.addEventListener('click', (e) => {
            if (mapDisplay) {
                photosat.style.display = 'none';
                mapwrapper.style.display = 'block';
            }
            else {
                photosat.style.display = 'block';
                mapwrapper.style.display = 'none';
            }
            mapDisplay = !mapDisplay
        });

        plage_select.addEventListener('change', () => {
            if (plage_select.options[plage_select.options.selectedIndex].value === 'greve') {
                // Centrer map
                mymap.setView([48.6797981,-3.6482218])
                // Recherger emprise et data depuis flask
                // recharger courbes temp depuis flask
                // recharger data temp à correler -> meme car dans la meme commune
                document.getElementById('smiley').src = './images/smiley_vert.png'
            }
        })

    </script>
</body>
</html>